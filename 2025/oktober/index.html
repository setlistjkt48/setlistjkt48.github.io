<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SetlistJKT48</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="icon" type="image/png" href="../../Logo SetlistJKT48.png" />
  </head>
  <body>
    <header>
      <div class="container">
        <div class="logo">
          <img src="../../Logo SetlistJKT48.png" alt="SetlistJKT48 Logo" />
          <span class="brand-name">SetlistJKT48</span>
        </div>
        <div class="buttons">
          <button
            class="icon-btn"
            onclick="location.href='https://setlistjkt48.github.io/'"
          >
            üè† Home
          </button>
          <div class="dropdown">
            <button class="icon-btn" id="showBtn">
              üìÖ Show Theater JKT48 ‚ñæ
            </button>
            <div class="dropdown-menu" id="dropdownMenu">
              <a href="">Januari 2025</a>
              <a href="">Februari 2025</a>
              <a href="">Maret 2025</a>
              <a href="">April 2025</a>
              <a href="">Mei 2025</a>
              <a href="">Juni 2025</a>
              <a href="">Juli 2025</a>
              <a href="">Agustus 2025</a>
              <a href="">September 2025</a>
              <a href="../oktober/index.html">Oktober 2025</a>
              <a href="">November 2025</a>
              <a href="">Desember 2025</a>
            </div>
          </div>
        </div>
        <div class="search">
          <input type="search" id="searchInput" placeholder="Cari video..." />
          <button id="searchBtn">üîç</button>
        </div>
      </div>
    </header>

    <main>
      <div class="grid">
        <section>
          <div class="player-wrap">
            <div class="player-container">
              <div class="video-wrapper">
                <div id="player"></div>

                <!-- overlay anti-klik -->
                <div class="click-blocker"></div>

                <!-- overlay gesture -->
                <div class="gesture-overlay">
                  <div class="gesture-zone left">
                    <div class="gesture-icon rewind">-10s ‚ü≤</div>
                  </div>
                  <div class="gesture-zone center">
                    <div class="gesture-icon playpause">‚ñ∑</div>
                  </div>
                  <div class="gesture-zone right">
                    <div class="gesture-icon forward">‚ü≥ +10s</div>
                  </div>
                </div>

                <!-- üîä overlay volume feedback -->
                <div
                  class="volume-overlay"
                  id="volumeOverlay"
                  aria-hidden="true"
                >
                  <div class="volume-percent" id="volumePercent">100%</div>
                  <div class="volume-icon" id="volumeIcon"></div>
                </div>

                <div class="overlay-playpause-btn"></div>
              </div>

              <!-- PROGRESS (di atas control) -->
              <div class="cust-progress-wrap">
                <div class="buffer-bar" aria-hidden="true"></div>
                <!-- <- NEW: buffer (abu-abu terang) -->
                <div
                  id="progressPreview"
                  class="progress-preview"
                  aria-hidden="true"
                >
                  <div id="progressPreviewTime" class="preview-time">0:00</div>
                </div>
                <div class="mouse-line" aria-hidden="true"></div>
                <!-- <- NEW: garis mengikuti mouse -->
                <input
                  id="progressRange"
                  class="progress-range"
                  type="range"
                  min="0"
                  max="100"
                  step="0.1"
                  value="0"
                />
              </div>

              <!-- CUSTOM CONTROLS (bawah) -->
              <div class="cust-controls">
                <div class="left-controls">
                  <button id="btnPlayPause" class="ctrl-btn play">‚ñ∂</button>

                  <!-- ‚èÆ Replay / Previous -->
                  <button
                    id="btnPrev"
                    class="ctrl-btn prev"
                    title="Ulangi / Sebelumnya"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 48 48"
                      width="26"
                      height="26"
                      fill="rgba(255,255,255,0.9)"
                    >
                      <!-- segitiga -->
                      <path d="M40 8v32L18 24l22-16z" />
                      <!-- garis vertikal di kiri -->
                      <rect x="8" y="8" width="4" height="32" rx="1.5" />
                    </svg>
                  </button>

                  <!-- ‚è≠ Next -->
                  <button id="btnNext" class="ctrl-btn next" title="Berikutnya">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 48 48"
                      width="26"
                      height="26"
                      fill="rgba(255,255,255,0.9)"
                    >
                      <!-- segitiga -->
                      <path d="M8 8v32l22-16-22-16z" />
                      <!-- garis vertikal di kanan -->
                      <rect x="36" y="8" width="4" height="32" rx="1.5" />
                    </svg>
                  </button>

                  <div id="timeDisplay" class="time-display">0:00 / 0:00</div>
                </div>

                <div class="right-controls">
                  <button id="btnVolume" class="ctrl-btn volume"></button>
                  <input
                    id="volumeRange"
                    class="volume-range"
                    type="range"
                    min="0"
                    max="100"
                    step="1"
                    value="100"
                  />
                  <button
                    id="btnPiP"
                    class="ctrl-btn pip"
                    title="Picture in Picture"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path
                        d="M19 7H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm0 10H5V9h14v8zM16 11h4v3h-4z"
                      />
                    </svg>
                  </button>
                  <button id="btnFullscreen" class="ctrl-btn fullscreen">
                    ‚õ∂
                  </button>
                </div>
              </div>
            </div>

            <!-- Line-up member -->
            <div class="member-box" id="memberBox">
              <div class="member-title">Line up Member</div>
              <div class="member-grid" id="memberGrid"></div>
              <div class="show-more">
                <button id="toggleBtn">Tampilkan Line up</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Playlist -->
        <aside class="playlist" id="playlist">
          <div class="item" onclick="loadVideo('QhSfakzeDuI',0)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/QhSfakzeDuI/hqdefault.jpg" />
            </div>
            <div class="it-title">CARA MEMINUM RAMUNE - 02/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('jMP9aAT467k',1)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/jMP9aAT467k/hqdefault.jpg" />
            </div>
            <div class="it-title">PAJAMA DRIVE - 04/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('vBuMZdgkbQc',2)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/vBuMZdgkbQc/hqdefault.jpg" />
            </div>
            <div class="it-title">PERTARUHAN CINTA (SHONICHI) - 05/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('jlyWFrS-J6s',3)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/jlyWFrS-J6s/hqdefault.jpg" />
            </div>
            <div class="it-title">ATURAN ANTI CINTA - 10/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('4FlREoK2RJE',4)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/4FlREoK2RJE/hqdefault.jpg" />
            </div>
            <div class="it-title">PAJAMA DRIVE - 11/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('Rx3s0hibtMk',5)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/Rx3s0hibtMk/hqdefault.jpg" />
            </div>
            <div class="it-title">PERTARUHAN CINTA - 12/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('My-YvK53LaE',6)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/My-YvK53LaE/hqdefault.jpg" />
            </div>
            <div class="it-title">INGIN BERTEMU - 12/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('Xiv0TCQXjDQ',7)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/Xiv0TCQXjDQ/hqdefault.jpg" />
            </div>
            <div class="it-title">PAJAMA DRIVE - 16/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('gupBG3qCIs4',8)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/gupBG3qCIs4/hqdefault.jpg" />
            </div>
            <div class="it-title">INGIN BERTEMU - 18/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('dtS1hY39kVU',9)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/dtS1hY39kVU/hqdefault.jpg" />
            </div>
            <div class="it-title">PAJAMA DRIVE - 19/10/2025</div>
          </div>
          <div class="item" onclick="loadVideo('tq9csBBrVvw',10)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/tq9csBBrVvw/hqdefault.jpg" />
            </div>
            <div class="it-title">
              SAMBIL MENGGANDENG ERAT TANGANKU (STS GRACIE) - 19/10/2025
            </div>
          </div>
          <div class="item" onclick="loadVideo('Q0p13oZMDqM',11)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/Q0p13oZMDqM/hqdefault.jpg" />
            </div>
            <div class="it-title">
              SAMBIL MENGGANDENG ERAT TANGANKU - 21/10/2025
            </div>
          </div>
          <div class="item" onclick="loadVideo('CSaNw0pUkEA',12)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/CSaNw0pUkEA/hqdefault.jpg" />
            </div>
            <div class="it-title">
              ATURAN ANTI CINTA (STS ANINDYA) - 22/10/2025
            </div>
          </div>
          <div class="item" onclick="loadVideo('JQew9GTJEF0',13)">
            <div class="thumb">
              <img src="https://img.youtube.com/vi/JQew9GTJEF0/hqdefault.jpg" />
            </div>
            <div class="it-title">PERTARUHAN CINTA (STS LULU) - 23/10/2025</div>
          </div>
        </aside>
      </div>
      <footer>Copyright ¬© 2025 SetlistJKT48</footer>
    </main>

    <!-- YouTube API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
      // === Konfigurasi URL Apps Script Web App ===
      const APP_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbyaC-dRyS85-2iSBSQT_WR33TysVkmm6lmkhfRD3S8s1aDQwVOo6NTL3vT6s19rZMJ6nA/exec";

      // === Lama cache email (dalam milidetik) ===
      const CACHE_DURATION = 3 * 24 * 60 * 60 * 1000; // 3 hari

      // Simpan email + timestamp ke localStorage
      function saveEmailCache(email) {
        const data = {
          email: email,
          timestamp: Date.now(),
        };
        localStorage.setItem("verifiedEmail", JSON.stringify(data));
      }

      // Ambil email dari cache (jika masih berlaku)
      function loadEmailCache() {
        const raw = localStorage.getItem("verifiedEmail");
        if (!raw) return null;

        try {
          const data = JSON.parse(raw);
          const now = Date.now();

          if (now - data.timestamp > CACHE_DURATION) {
            // sudah lebih dari 3 hari
            localStorage.removeItem("verifiedEmail");
            return null;
          }

          return data.email;
        } catch {
          localStorage.removeItem("verifiedEmail");
          return null;
        }
      }

      // === Fungsi verifikasi email ===
      async function verifyEmail() {
        // Cek cache email sebelumnya
        let cachedEmail = loadEmailCache();
        if (cachedEmail) {
          console.log("Email dari cache:", cachedEmail);
          return true; // sudah pernah login
        }

        // Tampilkan prompt input email
        const email = prompt(
          "Halaman untuk Membership. Masukkan email kamu untuk melanjutkan:"
        );
        if (!email) {
          alert("Email wajib diisi.");
          window.location.reload();
          return false;
        }

        try {
          // Kirim ke Apps Script untuk verifikasi
          const response = await fetch(
            `${APP_SCRIPT_URL}?email=${encodeURIComponent(email)}`
          );
          const data = await response.json();

          if (data.valid === true) {
            saveEmailCache(email);
            alert("Login berhasil!");
            return true;
          } else {
            alert("Email tidak terdaftar. Akses ditolak.");
            window.location.href = "https://setlistjkt48.github.io/";
            return false;
          }
        } catch (err) {
          console.error(err);
          alert("Terjadi kesalahan koneksi ke server.");
          return false;
        }
      }

      // Jalankan verifikasi sebelum halaman tampil
      document.addEventListener("DOMContentLoaded", async () => {
        const ok = await verifyEmail();
        if (!ok) {
          document.body.innerHTML =
            "<h2 style='color:white;text-align:center;margin-top:40vh;'>Akses ditolak</h2>";
        }
      });
    </script>
    <script src="../script.js"></script>
    <script>
      // === Lineup Data ===
      const videoLineup = [
        [
          "Christy",
          "Lia",
          "Cathy",
          "Elin",
          "Cynthia",
          "Danella",
          "Gita",
          "Gracie",
          "Greesel",
          "Eli",
          "Jessi",
          "Lyn",
          "Kathrina",
          "Marsha",
          "Michie",
          "Muthe",
        ],
        [
          "Aralie",
          "Virgi",
          "Auwia",
          "Giaa",
          "Maira",
          "Ekin",
          "Levi",
          "Mikaela",
          "Nayla",
          "Nachia",
          "Intan",
          "Kimmy",
        ],
        [
          "Christy",
          "Lia",
          "Fiony",
          "Freya",
          "Gita",
          "Gracie",
          "Greesel",
          "Jessi",
          "Marsha",
          "Michie",
          "Muthe",
          "Gracia",
        ],
        [
          "Anindya",
          "Cathy",
          "Chelsea",
          "Cynthia",
          "Danella",
          "Daisy",
          "Olla",
          "Fiony",
          "Fritzy",
          "Gendis",
          "Gita",
          "Eli",
          "Lyn",
          "Marsha",
          "Muthe",
          "Raisha",
        ],
        [
          "Delynn",
          "Auwia",
          "Lily",
          "Maira",
          "Ekin",
          "Trisha",
          "Mikaela",
          "Nayla",
          "Intan",
          "Oline",
          "Ribka",
          "Nala",
        ],
        [
          "Alya",
          "Lia",
          "Oniel",
          "Fritzy",
          "Gita",
          "Greesel",
          "Eli",
          "Indah",
          "Kathrina",
          "Lulu",
          "Muthe",
          "Raisha",
        ],
        [
          "Aralie",
          "Virgi",
          "Rilly",
          "Erine",
          "Giaa",
          "Trisha",
          "Jemima",
          "Levi",
          "Nachia",
          "Intan",
          "Oline",
          "Kimmy",
        ],
        [
          "Aralie",
          "Delynn",
          "Virgi",
          "Auwia",
          "Rilly",
          "Erine",
          "Giaa",
          "Maira",
          "Ekin",
          "Trisha",
          "Mikaela",
          "Intan",
        ],
        [
          "Aralie",
          "Delynn",
          "Virgi",
          "Rilly",
          "Giaa",
          "Ekin",
          "Trisha",
          "Levi",
          "Mikaela",
          "Nayla",
          "Nachia",
          "Ribka",
        ],
        [
          "Virgi",
          "Auwia",
          "Rilly",
          "Erine",
          "Giaa",
          "Maira",
          "Ekin",
          "Jemima",
          "Nayla",
          "Intan",
          "Oline",
          "Kimmy",
        ],
        [
          "Alya",
          "Cathy",
          "Cynthia",
          "Danella",
          "Daisy",
          "Gita",
          "Gracie",
          "Greesel",
          "Indah",
          "Kathrina",
          "Marsha",
          "Michie",
        ],
        [
          "Alya",
          "Amanda",
          "Lia",
          "Lana",
          "Danella",
          "Daisy",
          "Fiony",
          "Greesel",
          "Lyn",
          "Michie",
          "Muthe",
          "Gracia",
        ],
        [
          "Anindya",
          "Cathy",
          "Elin",
          "Chelsea",
          "Cynthia",
          "Danella",
          "Daisy",
          "Olla",
          "Fritzy",
          "Gendis",
          "Gita",
          "Gracie",
          "Eli",
          "Indah",
          "Jessi",
          "Lyn",
        ],
        [
          "Amanda",
          "Christy",
          "Lia",
          "Cathy",
          "Olla",
          "Freya",
          "Gita",
          "Gracie",
          "Jessi",
          "Lulu",
          "Marsha",
          "Michie",
        ],
      ];
    </script>
  </body>
</html>
